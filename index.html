

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Flasker &mdash; Flasker 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Flasker 0.1 documentation" href="#" />
    <link rel="next" title="Overview" href="project.html" /> 
  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="#">
          <span>Flasker 0.1 documentation</span></a></h1>
        <h2 class="heading"><span>Flasker</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="#">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="project.html">Overview</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="flasker">
<h1>Flasker<a class="headerlink" href="#flasker" title="Permalink to this headline">¶</a></h1>
<p>A configurable, lightweight framework that integrates <a class="reference external" href="http://flask.pocoo.org/docs/api/">Flask</a>, <a class="reference external" href="http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html">SQLAlchemy</a> and
<a class="reference external" href="http://docs.celeryproject.org/en/latest/index.html">Celery</a>.</p>
<ul>
<li><p class="first">What Flasker is!</p>
<blockquote>
<div><ul class="simple">
<li>A one stop <tt class="docutils literal"><span class="pre">.cfg</span></tt> configuration file for Flask, Celery and the
SQLAlchemy engine.</li>
<li>A simple pattern to organize your project via the
<tt class="docutils literal"><span class="pre">flasker.current_project</span></tt> proxy (cf. <a class="reference internal" href="#structuring-your-project">Structuring your project</a>).</li>
<li>A command line tool from where you can create new projects, launch the
Flask buit in <a class="reference external" href="http://werkzeug.pocoo.org/">Werkzeug</a> server, start Celery workers and the <a class="reference external" href="https://github.com/mher/flower">Flower</a>
tool, and run a shell in the current project context.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">What Flasker isn&#8217;t?</p>
<blockquote>
<div><ul class="simple">
<li>A simplified version of Flask, Celery, and SQLAlchemy. Some knowledge of these
frameworks is therefore required.</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Flasker also comes with three extensions for commonly needed functionalities:</p>
<ul class="simple">
<li>Authentication</li>
<li>Expanded ORM Models</li>
<li>ReSTful API <em>(still alpha)</em></li>
</ul>
<p>Flasker is under development. You can find the latest version on <a class="reference external" href="http://github.com/mtth/flasker">GitHub</a> and
read the documentation on <a class="reference external" href="http://mtth.github.com/flasker">GitHub pages</a>.</p>
<div class="section" id="quickstart">
<h2>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Installation:</p>
<div class="code bash highlight-python"><pre>$ pip install flasker</pre>
</div>
</li>
<li><p class="first">To create a new project:</p>
<div class="code bash highlight-python"><pre>$ flasker new basic</pre>
</div>
<p>This will create a basic project configuration file <tt class="docutils literal"><span class="pre">default.cfg</span></tt> in the
current directory and a basic <a class="reference external" href="http://twitter.github.com/bootstrap/index.html">Bootstrap</a> themed app (this can be turned off
with the <tt class="docutils literal"><span class="pre">-a</span></tt> flag). Another sample configuration file is available
via <tt class="docutils literal"><span class="pre">flasker</span> <span class="pre">new</span> <span class="pre">celery</span></tt> that includes sane defaults for task routing.</p>
</li>
<li><p class="first">Next steps:</p>
<div class="code bash highlight-python"><pre>$ flasker -h</pre>
</div>
<p>This will list all commands now available for that project:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">server</span></tt> to run the Werkzeug app server</li>
<li><tt class="docutils literal"><span class="pre">worker</span></tt> to start a worker for the Celery backend</li>
<li><tt class="docutils literal"><span class="pre">flower</span></tt> to run the Flower worker management app</li>
<li><tt class="docutils literal"><span class="pre">shell</span></tt> to start a shell in the current project context (using <a class="reference external" href="http://ipython.org/">IPython</a>
if it is available)</li>
<li><tt class="docutils literal"><span class="pre">new</span></tt> to create a new default configuration file</li>
</ul>
<p>Extra help is available for each command by typing:</p>
<div class="code bash highlight-python"><pre>$ flasker &lt;command&gt; -h</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="structuring-your-project">
<h2>Structuring your project<a class="headerlink" href="#structuring-your-project" title="Permalink to this headline">¶</a></h2>
<p>Here is a sample minimalistic project configuration file:</p>
<div class="code cfg highlight-python"><pre>[PROJECT]
NAME = My Project
MODULES = app.views, app.tasks
[ENGINE]
# SQLAlchemy engine configuration
URL = sqlite:///db/db.sqlite
[FLASK]
# any valid Flask configuration option can go here
DEBUG = True
TESTING = True
[CELERY]
# any valid Celery configuration option can go here
BROKER_URL = redis://</pre>
</div>
<p>Before running a command the <tt class="docutils literal"><span class="pre">flasker</span></tt> command line tool imports all the
modules declared in the <tt class="docutils literal"><span class="pre">MODULES</span></tt> key of the configuration file (in the
<tt class="docutils literal"><span class="pre">PROJECT</span></tt> section). Inside each of these you can use the
<tt class="docutils literal"><span class="pre">flasker.current_project</span></tt> proxy to get access to the Flask application
object, the Celery application object and the SQLAlchemy database session
registry. Therefore a very simple pattern inside each module is to do:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="kn">from</span> <span class="nn">flasker</span> <span class="kn">import</span> <span class="n">current_project</span> <span class="k">as</span> <span class="n">pj</span>

<span class="c"># the Flask application</span>
<span class="n">flask_app</span> <span class="o">=</span> <span class="n">pj</span><span class="o">.</span><span class="n">flask</span>

<span class="c"># the Celery application</span>
<span class="n">celery_app</span> <span class="o">=</span> <span class="n">pj</span><span class="o">.</span><span class="n">celery</span>

<span class="c"># the SQLAlchemy scoped session registry</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">pj</span><span class="o">.</span><span class="n">session</span>

<span class="c"># normally you probably wouldn&#39;t need all three in a single file</span>
<span class="c"># but you get the idea - and now you can do stuff with each...</span>

<span class="nd">@flask_app.route</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
  <span class="sd">&quot;&quot;&quot;A random view.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">&#39;index.html&#39;</span><span class="p">)</span>

<span class="nd">@celery_app.task</span>
<span class="k">def</span> <span class="nf">task</span><span class="p">():</span>
  <span class="sd">&quot;&quot;&quot;And a great task.&quot;&quot;&quot;</span>
  <span class="k">pass</span>

<span class="c"># and so on...</span>
</pre></div>
</div>
<p>If you are not using the command line tool (for example if you are using a
separate WSGI server or working from an IPython Notebook), you can load the
project manually as follow:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">flasker</span> <span class="kn">import</span> <span class="n">Project</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="s">&#39;path/to/default.cfg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="project-configuration">
<h2>Project configuration<a class="headerlink" href="#project-configuration" title="Permalink to this headline">¶</a></h2>
<p>A few options are available for the <tt class="docutils literal"><span class="pre">PROJECT</span></tt> section of the configuration
file:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">NAME</span></tt>: the name of the project, used for debugging and to generate a
default domain name for the Celery workers.</li>
<li><tt class="docutils literal"><span class="pre">MODULES</span></tt>: comma separated list of the project&#8217;s modules. They must be
importable from the configuration file&#8217;s folder.</li>
<li><tt class="docutils literal"><span class="pre">FLASK_ROOT_FOLDER</span></tt>: path to the Flask application&#8217;s root folder relative
to the configuration file (defaults to <tt class="docutils literal"><span class="pre">app</span></tt>).</li>
<li><tt class="docutils literal"><span class="pre">FLASK_STATIC_FOLDER</span></tt>: the application&#8217;s <tt class="docutils literal"><span class="pre">static_folder</span></tt> relative to the
application&#8217;s root folder (defaults to <tt class="docutils literal"><span class="pre">static</span></tt>).</li>
<li><tt class="docutils literal"><span class="pre">FLASK_TEMPLATE_FOLDER</span></tt>: the application&#8217;s <tt class="docutils literal"><span class="pre">template_folder</span></tt> relative to
the application&#8217;s root folder (defaults to <tt class="docutils literal"><span class="pre">templates</span></tt>).</li>
<li><tt class="docutils literal"><span class="pre">COMMIT_ON_TEARDOWN</span></tt>: if <tt class="docutils literal"><span class="pre">True</span></tt> (default), all database transactions will
be committed after each Flask app request and Celery task completion. If
<tt class="docutils literal"><span class="pre">False</span></tt> the session will simply be removed.</li>
<li><tt class="docutils literal"><span class="pre">DOMAIN</span></tt>: if specified, used to generate Celery worker hostnames (defaults
to the project name, sluggified).</li>
<li><tt class="docutils literal"><span class="pre">SUBDOMAIN</span></tt>: if specified, used to generate Celery worker hostnames
(defaults to the configuration file&#8217;s name).</li>
</ul>
</div>
</div>
<div class="section" id="contents">
<h1>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="project.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="project.html#module-flasker.__main__">Console tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="project.html#module-flasker.project">Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#module-flasker.ext.orm">ORM</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#module-flasker.ext.skl">SKL</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#module-flasker.ext.api">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#module-flasker.ext.auth">Authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Utilities</a></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        <a class="uplink" href="#">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="project.html">Overview</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright 2013, Matthieu Monsch.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>